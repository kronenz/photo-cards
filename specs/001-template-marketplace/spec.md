# Feature Specification: Template Marketplace

**Feature Branch**: `001-template-marketplace`
**Created**: 2025-10-07
**Status**: Draft
**Input**: Template Marketplace - 사용자가 홀로그래픽 카드 템플릿을 업로드, 판매, 구매할 수 있는 마켓플레이스

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Template Upload & Sharing (Priority: P1)

KBO 팬들이 자신이 만든 홀로그래픽 카드 템플릿을 커뮤니티와 공유하고, 다른 크리에이터들이 이를 활용하여 새로운 카드를 만들 수 있도록 한다.

**Why this priority**: 템플릿 마켓플레이스의 핵심 가치 제안. 콘텐츠가 없으면 마켓플레이스가 성립하지 않으므로 최우선 구현 필요.

**Independent Test**: 크리에이터가 템플릿을 업로드하고, 다른 사용자가 해당 템플릿을 검색하여 다운로드할 수 있으면 MVP 완성.

**Acceptance Scenarios**:

1. **Given** 사용자가 완성된 홀로그래픽 카드를 보유하고 있을 때, **When** "템플릿으로 저장" 버튼을 클릭하면, **Then** 시스템은 카드의 레이아웃, 효과, 스타일을 템플릿 패키지로 추출하여 저장한다
2. **Given** 템플릿 파일이 준비되었을 때, **When** 업로드 화면에서 제목, 설명, 태그, 카테고리를 입력하고 업로드하면, **Then** 시스템은 템플릿을 마켓플레이스에 게시하고 고유 ID를 부여한다
3. **Given** 다른 사용자가 마켓플레이스를 방문했을 때, **When** 검색 또는 카테고리 필터를 사용하면, **Then** 업로드된 템플릿이 그리드 레이아웃으로 표시된다
4. **Given** 사용자가 원하는 템플릿을 찾았을 때, **When** 템플릿 카드를 클릭하면, **Then** 상세 페이지에서 미리보기, 설명, 사용 예시, 다운로드 버튼이 표시된다
5. **Given** 사용자가 템플릿을 다운로드했을 때, **When** 카드 제작 화면에서 "내 템플릿" 탭을 열면, **Then** 다운로드한 템플릿이 목록에 표시되고 즉시 사용 가능하다

---

### User Story 2 - Template Rating & Review System (Priority: P2)

커뮤니티가 템플릿의 품질을 평가하고 피드백을 공유하여, 고품질 템플릿이 자연스럽게 부각되고 크리에이터가 성장할 수 있는 생태계를 만든다.

**Why this priority**: 품질 관리와 커뮤니티 신뢰도 확보에 필수. P1만으로는 저품질 템플릿과 고품질 템플릿을 구분할 수 없음.

**Independent Test**: 사용자가 템플릿을 다운로드한 후 별점과 리뷰를 작성하고, 다른 사용자들이 평점 순으로 템플릿을 정렬할 수 있으면 검증 완료.

**Acceptance Scenarios**:

1. **Given** 사용자가 템플릿을 다운로드하여 사용했을 때, **When** 템플릿 상세 페이지에서 "리뷰 작성" 버튼을 클릭하면, **Then** 5점 만점 평점, 세부 평가(창의성, 사용 편의성, 완성도), 텍스트 리뷰 입력 폼이 표시된다
2. **Given** 리뷰가 작성되었을 때, **When** 다른 사용자가 템플릿을 조회하면, **Then** 평균 평점, 리뷰 개수, 베스트 리뷰가 상세 페이지 상단에 표시된다
3. **Given** 여러 리뷰가 존재할 때, **When** 다른 사용자가 리뷰를 읽으면, **Then** "도움이 됐어요" 버튼으로 유용한 리뷰를 추천할 수 있다
4. **Given** 템플릿 크리에이터가 리뷰를 받았을 때, **When** 크리에이터가 템플릿을 업데이트하면, **Then** 기존 리뷰에 "v1.0 기준" 라벨이 표시되고 새 버전 리뷰와 구분된다

---

### User Story 3 - Template Marketplace Discovery & Filtering (Priority: P2)

사용자가 원하는 스타일과 용도의 템플릿을 빠르게 찾을 수 있도록 검색, 필터링, 추천 기능을 제공한다.

**Why this priority**: 템플릿이 100개 이상 쌓이면 탐색이 어려워지므로 초기부터 구축 필요. P1, P2가 함께 MVP를 구성.

**Independent Test**: 사용자가 "홈런 순간" 키워드로 검색하거나 "인기순" 필터를 적용하여 원하는 템플릿을 3분 이내에 찾을 수 있으면 성공.

**Acceptance Scenarios**:

1. **Given** 마켓플레이스 메인 페이지에 있을 때, **When** 검색창에 "홈런", "도루", "LG 트윈스" 등 키워드를 입력하면, **Then** 제목, 설명, 태그에 해당 키워드가 포함된 템플릿이 표시된다
2. **Given** 검색 결과가 표시되었을 때, **When** "인기순", "최신순", "평점순", "다운로드순" 정렬 옵션을 선택하면, **Then** 해당 기준으로 템플릿이 재정렬된다
3. **Given** 사용자가 특정 스타일을 선호할 때, **When** "카테고리" 필터에서 "홀로그래픽 효과", "스토리텔링", "통계 시각화" 등을 선택하면, **Then** 해당 카테고리의 템플릿만 필터링되어 표시된다
4. **Given** 사용자가 KBO 특정 구단 팬일 때, **When** "팀 필터"에서 LG, 두산, KT 등을 선택하면, **Then** 해당 팀 컬러와 테마가 적용된 템플릿이 우선 표시된다
5. **Given** 사용자가 과거에 템플릿을 다운로드한 이력이 있을 때, **When** 마켓플레이스 메인 페이지를 방문하면, **Then** "추천 템플릿" 섹션에 사용자 취향 기반 AI 추천 템플릿이 표시된다

---

### User Story 4 - Template Versioning & Updates (Priority: P3)

크리에이터가 템플릿을 지속적으로 개선하고, 사용자들이 최신 버전을 받을 수 있도록 버전 관리 시스템을 제공한다.

**Why this priority**: 품질 개선과 장기적 커뮤니티 건강성에 중요하지만, 초기 MVP에는 필수가 아님.

**Independent Test**: 크리에이터가 템플릿 v1.1을 업로드하고, 기존 다운로더가 "업데이트 알림"을 받아 새 버전을 다운로드할 수 있으면 검증 완료.

**Acceptance Scenarios**:

1. **Given** 크리에이터가 템플릿을 개선했을 때, **When** 기존 템플릿 관리 페이지에서 "새 버전 업로드"를 선택하면, **Then** v1.1, v1.2 등 버전 번호와 변경 사항을 입력하는 폼이 표시된다
2. **Given** 새 버전이 업로드되었을 때, **When** 기존 버전을 다운로드한 사용자가 플랫폼에 로그인하면, **Then** "업데이트 가능" 알림과 함께 변경 사항 요약이 표시된다
3. **Given** 여러 버전이 존재할 때, **When** 사용자가 템플릿 상세 페이지를 방문하면, **Then** 버전 히스토리 탭에서 각 버전의 변경 사항과 다운로드 통계를 확인할 수 있다

---

### User Story 5 - Template Remixing & Attribution (Priority: P3)

사용자가 다른 크리에이터의 템플릿을 기반으로 새로운 변형 템플릿을 만들고, 원작자에게 크레딧을 제공하는 파생 작품 생태계를 구축한다.

**Why this priority**: 커뮤니티 협업과 창의성 확장에 기여하지만, 기본 마켓플레이스 기능 이후 추가 가능.

**Independent Test**: 사용자가 기존 템플릿을 "리믹스"하여 새 템플릿을 생성하고, 상세 페이지에 "Based on [원본 템플릿]" 크레딧이 자동으로 표시되면 성공.

**Acceptance Scenarios**:

1. **Given** 사용자가 다운로드한 템플릿을 수정했을 때, **When** "리믹스로 저장" 버튼을 클릭하면, **Then** 시스템은 원본 템플릿 ID를 메타데이터에 기록하고 새 템플릿으로 저장한다
2. **Given** 리믹스 템플릿이 업로드되었을 때, **When** 다른 사용자가 해당 템플릿을 조회하면, **Then** 상세 페이지에 "Based on [원작자명]의 [원본 템플릿]" 섹션이 표시되고 원본 링크가 제공된다
3. **Given** 원작자가 대시보드를 방문했을 때, **When** "내 템플릿 영향력" 탭을 열면, **Then** 자신의 템플릿에서 파생된 리믹스 목록과 계보 트리 시각화가 표시된다

---

### User Story 6 - Premium Template Monetization (Priority: P4)

고품질 템플릿을 제작하는 크리에이터가 유료 템플릿을 판매하고 수익을 창출할 수 있는 시스템을 제공한다.

**Why this priority**: 크리에이터 경제 활성화에 중요하지만, 무료 템플릿 생태계가 먼저 자리 잡은 후 도입하는 것이 안전.

**Independent Test**: 크리에이터가 템플릿 가격을 설정하고, 구매자가 결제 후 즉시 다운로드할 수 있으면 검증 완료.

**Acceptance Scenarios**:

1. **Given** 크리에이터가 프리미엄 템플릿을 업로드할 때, **When** 가격 설정 옵션에서 금액을 입력하면, **Then** 시스템은 플랫폼 수수료(예: 20%)를 자동 계산하여 예상 수익을 표시한다
2. **Given** 사용자가 유료 템플릿을 발견했을 때, **When** "구매하기" 버튼을 클릭하면, **Then** 안전한 결제 창이 열리고 카드/간편결제 옵션이 제공된다
3. **Given** 결제가 완료되었을 때, **When** 사용자가 "내 템플릿" 페이지를 방문하면, **Then** 구매한 프리미엄 템플릿이 영구 사용 가능한 상태로 표시된다
4. **Given** 크리에이터에게 판매 수익이 발생했을 때, **When** 대시보드를 확인하면, **Then** 템플릿별 판매 통계, 누적 수익, 출금 가능 금액이 표시된다

---

### Edge Cases

- **중복 업로드 방지**: 동일한 템플릿이 여러 번 업로드되는 경우 시스템이 유사도를 감지하고 경고를 표시하는가?
- **대용량 파일**: 10MB 이상의 고해상도 템플릿 파일 업로드 시 어떻게 처리하는가? (압축, 청크 업로드, 진행 상태 표시)
- **저작권 침해 템플릿**: KBO/구단 로고가 포함된 템플릿 업로드 시 자동 감지 및 차단 메커니즘이 작동하는가?
- **템플릿 호환성**: 이전 버전의 카드 에디터에서 만든 템플릿이 최신 버전에서도 정상 작동하는가?
- **악의적 파일**: 악성 코드나 스크립트가 포함된 템플릿 파일 업로드 시 어떻게 방어하는가?
- **다운로드 실패**: 네트워크 오류로 다운로드가 중단된 경우 재개 또는 재다운로드 메커니즘이 있는가?
- **인기 템플릿 부하**: 특정 템플릿이 동시에 1000명에게 다운로드될 때 서버 성능이 유지되는가?

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 사용자가 완성된 홀로그래픽 카드를 템플릿 패키지(JSON + 에셋)로 변환하여 저장할 수 있어야 한다
- **FR-002**: 시스템은 템플릿 업로드 시 제목, 설명, 태그, 카테고리, 미리보기 이미지, 사용 예시를 입력받아야 한다
- **FR-003**: 시스템은 템플릿을 무료 또는 유료(가격 설정)로 게시할 수 있어야 한다
- **FR-004**: 시스템은 마켓플레이스에 템플릿을 Civitai 스타일 마소네리 그리드로 표시해야 한다
- **FR-005**: 시스템은 키워드 검색(제목, 설명, 태그 대상)을 제공해야 한다
- **FR-006**: 시스템은 카테고리(홀로그래픽 효과, 스토리텔링, 통계 시각화, KBO 구단별) 필터링을 지원해야 한다
- **FR-007**: 시스템은 정렬 옵션(인기순, 최신순, 평점순, 다운로드순)을 제공해야 한다
- **FR-008**: 시스템은 템플릿 상세 페이지에서 미리보기, 다운로드 버튼, 평점/리뷰, 사용 예시 갤러리, 크리에이터 정보를 표시해야 한다
- **FR-009**: 시스템은 사용자가 다운로드한 템플릿을 "내 템플릿" 라이브러리에 저장하고 카드 에디터에서 즉시 사용 가능하게 해야 한다
- **FR-010**: 시스템은 템플릿 다운로드 후 5점 만점 평점과 텍스트 리뷰 작성 기능을 제공해야 한다
- **FR-011**: 시스템은 세부 평가(창의성, 사용 편의성, 완성도)를 1-5점으로 입력받아야 한다
- **FR-012**: 시스템은 리뷰에 "도움이 됐어요" 버튼으로 유용한 리뷰를 추천할 수 있어야 한다
- **FR-013**: 시스템은 평균 평점, 리뷰 개수, 다운로드 통계를 실시간으로 집계하여 표시해야 한다
- **FR-014**: 시스템은 크리에이터가 기존 템플릿의 새 버전을 업로드할 수 있어야 한다 (버전 번호 + 변경 사항 기록)
- **FR-015**: 시스템은 템플릿 업데이트 시 기존 다운로더에게 알림을 발송해야 한다
- **FR-016**: 시스템은 템플릿 리믹스 시 원본 템플릿 ID를 메타데이터에 기록하고 크레딧을 자동 표시해야 한다
- **FR-017**: 시스템은 원작자가 자신의 템플릿에서 파생된 리믹스 목록과 계보 트리를 조회할 수 있어야 한다
- **FR-018**: 시스템은 유료 템플릿 판매 시 안전한 결제 처리(Stripe/Toss Payments)를 제공해야 한다
- **FR-019**: 시스템은 판매 수익에서 플랫폼 수수료를 자동 정산하고 크리에이터 대시보드에 표시해야 한다
- **FR-020**: 시스템은 AI 기반 추천 알고리즘으로 사용자 취향에 맞는 템플릿을 메인 페이지에 표시해야 한다
- **FR-021**: 시스템은 템플릿 업로드 시 KBO/구단 로고 자동 감지 기능으로 저작권 위험 템플릿을 경고해야 한다
- **FR-022**: 시스템은 업로드 파일 크기 제한(최대 15MB)을 설정하고 초과 시 압축을 권장해야 한다
- **FR-023**: 시스템은 템플릿 다운로드 시 파일 무결성을 검증하고 실패 시 재다운로드 옵션을 제공해야 한다

### Key Entities

- **Template**: 홀로그래픽 카드 템플릿 (ID, 제목, 설명, 크리에이터 ID, 카테고리, 태그, 버전, 가격, 파일 URL, 미리보기 이미지, 생성일, 업데이트일)
- **TemplateVersion**: 템플릿 버전 이력 (버전 번호, 변경 사항, 업로드 일시, 다운로드 수)
- **TemplateReview**: 템플릿 리뷰 (리뷰 ID, 템플릿 ID, 작성자 ID, 평점, 세부 평가 점수, 텍스트 리뷰, 작성일, 추천 수)
- **TemplateDownload**: 다운로드 이력 (사용자 ID, 템플릿 ID, 다운로드 일시, 버전)
- **TemplateRemix**: 리믹스 관계 (리믹스 템플릿 ID, 원본 템플릿 ID, 리믹스 작성자 ID)
- **TemplatePurchase**: 유료 템플릿 구매 (구매 ID, 사용자 ID, 템플릿 ID, 결제 금액, 결제 일시, 결제 상태)
- **CreatorRevenue**: 크리에이터 수익 (크리에이터 ID, 템플릿 ID, 총 판매 수, 누적 수익, 출금 가능 금액)

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 템플릿 업로드부터 마켓플레이스 게시까지 5분 이내에 완료할 수 있다
- **SC-002**: 사용자가 원하는 템플릿을 검색 또는 필터링으로 3분 이내에 찾을 수 있다
- **SC-003**: 템플릿 다운로드 및 카드 에디터 적용이 30초 이내에 완료된다
- **SC-004**: 마켓플레이스 메인 페이지 로딩 시간이 2초 이내다 (100개 템플릿 기준)
- **SC-005**: 고품질 템플릿(평점 4.5+ )이 검색 결과 상위 20%에 자동으로 배치된다
- **SC-006**: 플랫폼 출시 3개월 내 100개 이상의 템플릿이 업로드된다
- **SC-007**: 템플릿 다운로드 후 리뷰 작성률이 15% 이상이다
- **SC-008**: 유료 템플릿 구매 전환율이 방문자 대비 5% 이상이다
- **SC-009**: 크리에이터 상위 10%가 월 평균 10개 이상의 다운로드를 기록한다
- **SC-010**: 템플릿 리믹스 비율이 전체 템플릿의 20% 이상이다 (파생 창작 활성화 지표)
- **SC-011**: 저작권 위험 템플릿이 업로드 시도의 95% 이상 자동 감지된다
- **SC-012**: 사용자 만족도 조사에서 "원하는 템플릿을 쉽게 찾았다"에 80% 이상 긍정 응답

## Assumptions

- **기술적 가정**: 기존 홀로그래픽 카드 에디터(Phase 1)가 JSON 기반 템플릿 Import/Export를 지원한다고 가정
- **파일 형식**: 템플릿은 JSON(레이아웃 정보) + 에셋 번들(이미지, 폰트)로 구성되며, 최대 15MB로 제한
- **저장소**: 템플릿 파일은 클라우드 스토리지(AWS S3 또는 Vercel Blob)에 저장
- **결제**: 유료 템플릿은 Stripe 또는 Toss Payments를 통해 결제 처리
- **저작권**: 사용자 업로드 템플릿은 개인 창작물로 간주하며, KBO/구단 로고 포함 시 AI 자동 감지 후 경고
- **버전 관리**: Semantic Versioning (v1.0, v1.1, v2.0) 사용
- **추천 알고리즘**: 초기에는 단순 협업 필터링, 향후 머신러닝 기반 추천으로 발전
- **모바일 지원**: 템플릿 검색 및 다운로드는 모바일에서 가능하나, 카드 편집은 데스크톱 우선
- **다국어**: 초기 한국어만 지원, 향후 영어 확장 고려

## Dependencies

- **Phase 1 (Enhanced Card Interaction)**: 홀로그래픽 카드 에디터의 템플릿 Import/Export 기능 필요
- **Phase 4 (Community)**: 사용자 인증, 프로필, 팔로우 시스템 의존
- **PocketBase**: 템플릿 메타데이터, 리뷰, 다운로드 이력 저장
- **Cloud Storage**: AWS S3 또는 Vercel Blob (템플릿 파일 저장)
- **Payment Gateway**: Stripe 또는 Toss Payments (유료 템플릿 결제)
- **AI Image Recognition**: KBO/구단 로고 자동 감지 (TensorFlow.js 또는 Cloudflare AI)

## Out of Scope

- **템플릿 공동 편집**: 여러 크리에이터가 실시간으로 하나의 템플릿을 공동 편집하는 기능 (Phase 2 이후 고려)
- **3D 템플릿**: 현재는 2D 홀로그래픽 카드 템플릿만 지원, 3D 모델 템플릿은 제외
- **오프라인 템플릿 판매**: 실물 카드 템플릿 판매는 별도 파트너십 필요 (Requirement 18 참조)
- **템플릿 라이선스 시스템**: 상업적 사용 허가, CC 라이선스 등 복잡한 라이선스 관리는 초기 버전 제외
- **템플릿 번역**: 템플릿 내 텍스트 자동 번역 기능은 제외
